
	<div class="row">
	    <div class="col-lg-12">
	        <h1 class="page-header">Dokumen Standar Mutu</h1>
	    </div>
	</div>

	<div class="row">
		<div class="col-lg-6">
	    	<div class="panel panel-default">
	            <div class="panel-heading clearfix">
	            	<div class="panel-title pull-left">
	            		<h4>Formulir</h4>
	            	</div>
	            </div>

             	<div class="panel-body">
	                <div class="row">
	                	<div class="col-lg-12">
	                		<form name="StandardDocumentForm" role="form" enctype="multipart/form-data">

	                			<div class="form-group has-feedback"
	                				ng-class="{
	                					'has-error': StandardDocumentForm.standard_id.$invalid && StandardDocumentForm.standard_id.$dirty && !loadingStandard }">
                                    <label class="control-label">Standard</label>&nbsp;<label style="color: #a94442;">*</label>
                                    <select name="standard_id" class="form-control" ng-options="option.id as option.description for option in standards" 
                                    	ng-model="input.standard_id" ng-required="true">
                                    </select>
                                    <span style="right: 10px;" class="form-control-feedback" 
  										ng-show="StandardDocumentForm.standard_id.$dirty || loadingStandard" aria-hidden="true">
  										<i class="fa" ng-class="{ 
  											'fa-close fa-lg': StandardDocumentForm.standard_id.$invalid && StandardDocumentForm.standard_id.$dirty }"></i>
  									</span>
  									<span style="right: 10px;" ng-show="loadingStandard" class="form-control-feedback" aria-hidden="true">
  										<i class="fa fa-spinner fa-pulse fa-lg"></i>
  									</span>

  									<div style="color: #a94442;" ng-messages="StandardDocumentForm.standard_id.$error" ng-if="StandardDocumentForm.standard_id.$dirty">
								        <small ng-message="required">* Standar harus ditentukan terlebih dahulu.</small>
								    </div>
								    <small ng-show="loadingStandard">* Load nama standar</small>
                                </div>

	                			<div class="form-group has-feedback"
	                				ng-class="{
	                					'has-error': (existNo && !loadingNo) || StandardDocumentForm.no.$invalid && StandardDocumentForm.no.$dirty,
	                					'has-success': !existNo && StandardDocumentForm.no.$dirty && !loadingNo }">
	                				<label class="control-label">Nomor Dokumen</label>&nbsp;<label style="color: #a94442;">*</label>
	                				<input type="text" name="no" class="form-control" 
	                					ng-model="input.no" ng-required="true" ng-pattern="/^[a-zA-Z0-9(),.()/& -]+$/">
	                				<span class="form-control-feedback" 
  										ng-show="StandardDocumentForm.no.$dirty || loadingNo" aria-hidden="true">
  										<i class="fa" ng-class="{ 
  											'fa-close fa-lg': existNo || StandardDocumentForm.no.$invalid,
  											'fa-spinner fa-pulse fa-lg': loadingNo && StandardDocumentForm.no.$valid,
  											'fa-check fa-lg': !existNo && StandardDocumentForm.no.$valid && !loadingNo }"></i>
  									</span>
  									<div style="color: #a94442;" ng-messages="StandardDocumentForm.no.$error " 
  										ng-if="StandardDocumentForm.no.$dirty">
								        <small ng-message="required">* Nama Dokumen Standar harus ditentukan terlebih dahulu.</small>
								        <small ng-message="pattern">* Nama Dokumen Standar harus tidak boleh terdapat karaker spesial.</small>
								    </div>
								    <small ng-show="loadingNo && StandardDocumentForm.no.$valid">* Check nama standar</small>
								    <small style="color: #a94442;" ng-show="existNo && StandardDocumentForm.no.$dirty && !loadingNo ">
								    	* Nama standar ini sudah ada didalam database.
							    	</small>
	                			</div>

	                			<div class="form-group has-feedback"
	                				ng-class="{
	                					'has-error': StandardDocumentForm.date.$invalid && StandardDocumentForm.date.$dirty}">
	                				<label class="control-label">Tanggal</label>&nbsp;<label style="color: #a94442;">*</label>
	                				<p class="input-group">
              							<input type="date" name="date" class="form-control" datepicker-popup 
              								ng-model="input.date" is-open="status.opened" datepicker-options="dateOptions"
              								ng-required="true" close-text="Close" />
              							<span class="input-group-btn">
                							<button type="button" class="btn btn-default" ng-click="open($event)">
                								<i class="glyphicon glyphicon-calendar"></i>
                							</button>
              							</span>
            						</p>
            						<span style="right: 40px;" class="form-control-feedback" 
  										ng-show="StandardDocumentForm.date.$dirty" aria-hidden="true">
  										<i class="fa" ng-class="{ 
  											'fa-close fa-lg': StandardDocumentForm.date.$invalid }"></i>
  									</span>
  									<div style="color: #a94442;" ng-messages="StandardDocumentForm.date.$error " ng-if="StandardDocumentForm.date.$dirty">
								        <small ng-message="required">* Tanggal Standar harus ditentukan terlebih dahulu.</small>
								    </div>
	                			</div>

	                			<div class="form-group has-feedback"
	                				ng-class="{
	                					'has-error': (existDescription && !loadingDescription) || StandardDocumentForm.description.$invalid && StandardDocumentForm.description.$dirty,
	                					'has-success': !existDescription && StandardDocumentForm.description.$dirty && !loadingDescription }">
	                				<label class="control-label">Nama Dokumen</label>&nbsp;<label style="color: #a94442;">*</label>
	                				<input type="text" name="description" class="form-control" 
	                					ng-model="input.description" ng-required="true" ng-pattern="/^[a-zA-Z0-9(),.& -]+$/">
	                				<span class="form-control-feedback" 
  										ng-show="StandardDocumentForm.description.$dirty || loadingDescription" aria-hidden="true">
  										<i class="fa" ng-class="{ 
  											'fa-close fa-lg': existDescription || StandardDocumentForm.description.$invalid,
  											'fa-spinner fa-pulse fa-lg': loadingDescription && StandardDocumentForm.description.$valid,
  											'fa-check fa-lg': !existDescription && StandardDocumentForm.description.$valid && !loadingDescription }"></i>
  									</span>
  									<div style="color: #a94442;" ng-messages="StandardDocumentForm.description.$error " 
  										ng-if="StandardDocumentForm.description.$dirty">
								        <small ng-message="required">* Nama Dokumen Standar harus ditentukan terlebih dahulu.</small>
								        <small ng-message="pattern">* Nama Dokumen Standar harus tidak boleh terdapat karaker spesial.</small>
								    </div>
								    <small ng-show="loadingDescription && StandardDocumentForm.description.$valid">* Check nama standar</small>
								    <small style="color: #a94442;" ng-show="existDescription && StandardDocumentForm.description.$dirty && !loadingDescription ">
								    	* Nama standar ini sudah ada didalam database.
							    	</small>
	                			</div>

	                			<div class="form-group has-feedback"
	                				ng-class="{
	                					'has-error': StandardDocumentForm.file.$invalid && StandardDocumentForm.file.$dirty }">
	                				<label class="control-label">Dokumen</label>&nbsp;<label style="color: #a94442;">*</label>
	                				<input type="file" name="file" class="form-control" ngf-select accept="*" 
	                					ng-model="file" ng-required="requiredUpload">
	                				<span class="form-control-feedback" 
  										ng-show="StandardDocumentForm.file.$dirty" aria-hidden="true">
  										<i class="fa" ng-class="{ 
  											'fa-close fa-lg': StandardDocumentForm.file.$invalid,
  											'fa-check fa-lg': StandardDocumentForm.file.$valid }"></i>
  									</span>
  									<div style="color: #a94442;" ng-messages="StandardDocumentForm.file.$error " 
  										ng-if="StandardDocumentForm.file.$dirty">
								        <small ng-message="required">* Document terkait harus dilampirkan.</small>
								    </div>
								    <small ng-show="input.document"><a target="_blank" ng-href="/upload/standardDocument/{{ input.document }}">* {{ input.document }}</a></small>
	                			</div>

	                		</form>
	                	</div>
	                </div>
	            </div>

	            <div class="panel-footer clearfix">
	                <div class="panel-title pull-right">
	                	<div class="form-inline">
		                	<a ui-sref="main.admin.standarddocument" class="btn btn-default"><i class="fa fa-undo"></i></a>
		                	<button ng-click="submit(file)" class="btn btn-primary" 
		                		ng-disabled="(StandardDocumentForm.$invalid && validated) || existNo || existDescription || loadingNo || loadingDescription"><i class="fa fa-save"></i></button>
		                </div>
	                </div>
	            </div>

	        </div>
	   	</div>
	</div>

<pre ng-if="debug">
	{{ input.date }}
</pre>